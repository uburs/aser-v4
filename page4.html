<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Emotion-Enhanced Captions - Page 4</title>
<style>
    body {
        font-family: 'Times New Roman', Times, serif;
        background-color: #f0f8ff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .container {
        display: none;
        width: 90%;
        height: 80%;
        border: 2px solid #000;
        border-radius: 10px;
        background-color: #fff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: relative;
        flex-direction: row;
    }
    .container.active {
        display: flex;
    }
    .emotion-detection-overlay {
        position: absolute;
        top: 0;
        width: 100%;
        height: 100%;
        overflow-y: hidden;
        padding: 10px;
        text-align: center;
        color: black;
        font-size: 18px;
        line-height: 1.0;
        display: flex;
        flex-direction: column-reverse;
        align-items: center;
        pointer-events: none;
    }
    
    @keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        50% { transform: translateX(5px); }
        75% { transform: translateX(-5px); }
        100% { transform: translateX(0); }
    }
    .caption-text {
        display: inline-block;
        margin-right: 5px;
        opacity: 0;
        animation: fadeIn 1s forwards;
    }
    .caption-text.bold {
        font-weight: bold;
    }
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    video {
        width: 80%;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .emotion-text {
        display: inline-block;
        margin-right: 5px;
        animation: moveUp 10s linear infinite;
    }
    @keyframes moveUp {
        from {
            transform: translateY(100%);
        }
        to {
            transform: translateY(-100%);
        }
    }
    .navigation {
        position: absolute;
        bottom: 20px;
        width: 100%;
        display: flex;
        justify-content: space-between;
    }
    button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        margin-bottom: 10px;
        background-color: rgba(65, 125, 45, 0.941);
    }
    #surveyButton {
        padding: 10px 18px;
        font-size: 18px;
        background-color: rgb(198, 205, 125);
        cursor: not-allowed;
        opacity: 0.5;
        margin-top: 20px;
    }
    .heading {
        margin-bottom: 20px;
        font-size: 24px;
        font-weight: bold;
        text-align: center;
    }
    .high-pitch {
        color: #FF4500;
        font-weight: bold;
    }
    .low-pitch {
        color: #1E90FF;
        font-style: italic;
    }
</style>
</head>
<body>
<div class="heading">Caption Prototype 4</div>
<hp>Normal caption with embedded emojis and visualization</hp>
<div class="container active" id="page4">
    <div class="emotion-detection-overlay" id="captionBox4">
        <!-- Captions will appear here -->
    </div>
    <div class="navigation">
      <!--  <a href="page3.html"><button id="previous4">Previous</button></a> -->
    </div>
</div>
<button id="surveyButton" onclick="window.location.href='https://virginiatech.questionpro.com/prototype4'" disabled>Begin Prototype 4 Survey</button>
<h3>Please note that the survey button will only become active once the caption has finished.</h3>
<script>
    const textPage4 = "üåü Introduction to Chemistry: Chemistry is the branch of science that studies the composition, structure, properties, and changes of matter. üß™ It involves understanding how substances interact, combine, and transform to form new substances. üå°Ô∏è Chemistry is divided into several sub-disciplines, including organic chemistry, inorganic chemistry, physical chemistry, analytical chemistry, and biochemistry. üß¨ Organic chemistry focuses on the study of carbon-containing compounds, while inorganic chemistry deals with inorganic compounds. üìö Physical chemistry combines principles of physics and chemistry to study the physical properties of molecules, the forces that act upon them, and their interactions. Analytical chemistry involves the analysis of material samples to understand their chemical composition and structure. üî¨ Biochemistry explores the chemical processes within and related to living organisms. üå± Chemistry plays a vital role in various industries, including pharmaceuticals, agriculture, environmental science, and materials engineering. üåç Recent advancements in chemistry have led to the development of new materials, sustainable energy solutions, and improved analytical techniques. üåü Understanding chemistry is crucial for developing new drugs, creating innovative materials, and addressing environmental issues. üåø As our knowledge of üòä Chemistry is fascinating üòÑ and has a profound impact on our daily lives. Let's explore its wonders together! üôè";

    const captionsPage4 = textPage4.split(' ').map(word => {
        let emotion = "neutral";
        if (/üòä|üòÑ|üôè|üåü|üß™|üå°Ô∏è|üß¨|üìö|üî¨|üå±|üåç|üåø/.test(word)) emotion = "happy";
        if (word === "Chemistry") word = '<span class="high-pitch">Chemistry</span>';
        if (word === "science") word = '<span class="low-pitch">science</span>';
        return { text: word, emotion };
    });

    function displayCaptionPage4(captionBox, textArray, index = 0, wordsPerLine = 10) {
        if (index < textArray.length) {
            setTimeout(() => {
                let line = textArray.slice(index, index + wordsPerLine).map(word => word.text).join(' ');
                const span = document.createElement('span');
                span.classList.add('caption-text');
                span.innerHTML = line; // Use innerHTML to include the span tags

                captionBox.insertBefore(document.createElement('br'), captionBox.firstChild);
                captionBox.insertBefore(span, captionBox.firstChild);
                captionBox.scrollTop = captionBox.scrollHeight; // Scroll to bottom

                displayCaptionPage4(captionBox, textArray, index + wordsPerLine, wordsPerLine);
            }, 2500); // Adjust the speed of the captions here
        }
    }

    window.onload = () => {
        displayCaptionPage4(document.getElementById('captionBox4'), captionsPage4, 0, 10);

        setTimeout(() => {
            const surveyButton = document.getElementById('surveyButton');
            surveyButton.disabled = false;
            surveyButton.style.cursor = 'pointer';
            surveyButton.style.opacity = '1';
        }, 60000); // Enable after 67 seconds
    };
</script>
</body>
</html>

